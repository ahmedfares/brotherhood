(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{195:function(e,t,a){e.exports=a(246)},246:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),i=a(160),s=a(18),c=a(15),m=a(29),u=a(30),d=a(31),h=a(35),p=a(308),g=a(282),y=a(277),f=a(307),E=a(285),b=a(284),N=a(94),v=a.n(N),C=a(74),w=a(23),O=a.n(w),x=a(275),S=a(283),j=a(12),k=a.n(j),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t={email:n.state.email,password:n.state.password};k.a.post("https://us-central1-brotherhood-edc8d.cloudfunctions.net/api/login",t).then((function(e){localStorage.setItem("AuthToken","Bearer ".concat(e.data.token)),n.setState({loading:!1}),n.props.history.push("/")})).catch((function(e){n.setState({errors:e.response.data,loading:!1})}))},n.state={email:"",password:"",errors:[],loading:!1},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.errors,n=t.loading;return r.a.createElement(x.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(v.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,helperText:a.email,error:!!a.email,onChange:this.handleChange}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",helperText:a.password,error:!!a.password,onChange:this.handleChange}),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSubmit,disabled:n||!this.state.email||!this.state.password},"Sign In",n&&r.a.createElement(S.a,{size:30,className:e.progess})),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0},r.a.createElement(E.a,{href:"signup",variant:"body2"},"Don't have an account? Sign Up"))),a.general&&r.a.createElement(C.a,{variant:"body2",className:e.customError},a.general))))}}]),a}(n.Component),T=O()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progess:{position:"absolute"}}}))(A),I=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t={firstName:n.state.firstName,lastName:n.state.lastName,phoneNumber:n.state.phoneNumber,country:n.state.country,username:n.state.username,email:n.state.email,password:n.state.password,confirmPassword:n.state.confirmPassword};k.a.post("/signup",t).then((function(e){localStorage.setItem("AuthToken","".concat(e.data.token)),n.setState({loading:!1}),n.props.history.push("/")})).catch((function(e){n.setState({errors:e.response.data,loading:!1})}))},n.state={firstName:"",lastName:"",phoneNumber:"",country:"",username:"",email:"",password:"",confirmPassword:"",errors:[],loading:!1},n}return Object(u.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.errors,n=t.loading;return r.a.createElement(x.a,{component:"main",maxWidth:"xs"},r.a.createElement(y.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(p.a,{className:e.avatar},r.a.createElement(v.a,null)),r.a.createElement(C.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"firstName",helperText:a.firstName,error:!!a.firstName,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastName",helperText:a.lastName,error:!!a.lastName,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"User Name",name:"username",autoComplete:"username",helperText:a.username,error:!!a.username,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",autoComplete:"phoneNumber",pattern:"[7-9]{1}[0-9]{9}",helperText:a.phoneNumber,error:!!a.phoneNumber,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",helperText:a.email,error:!!a.email,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"country",label:"Country",name:"country",autoComplete:"country",helperText:a.country,error:!!a.country,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",helperText:a.password,error:!!a.password,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"current-password",onChange:this.handleChange}))),r.a.createElement(g.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:this.handleSubmit,disabled:n||!this.state.email||!this.state.password||!this.state.firstName||!this.state.lastName||!this.state.country||!this.state.username||!this.state.phoneNumber},"Sign Up",n&&r.a.createElement(S.a,{size:30,className:e.progess})),r.a.createElement(b.a,{container:!0,justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement(E.a,{href:"login",variant:"body2"},"Already have an account? Sign in"))))))}}]),a}(n.Component),P=O()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},progess:{position:"absolute"}}}))(I),L=a(70),W=a(154),B=a.n(W),z=a(286),F=a(287),D=a(288),q=a(289),U=a(4),V=function(e){null===localStorage.getItem("AuthToken")&&e.push("/login")},H=["classes"],R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).componentWillMount=function(){V(n.props.history);var e=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(e)},k.a.get("/user").then((function(e){console.log(e.data),n.setState({firstName:e.data.userCredentials.firstName,lastName:e.data.userCredentials.lastName,email:e.data.userCredentials.email,phoneNumber:e.data.userCredentials.phoneNumber,country:e.data.userCredentials.country,username:e.data.userCredentials.username,uiLoading:!1})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({errorMsg:"Error in retrieving the data"})}))},n.handleChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleImageChange=function(e){n.setState({image:e.target.files[0]})},n.profilePictureHandler=function(e){e.preventDefault(),n.setState({uiLoading:!0}),V(n.props.history);var t=localStorage.getItem("AuthToken"),a=new FormData;a.append("image",n.state.image),a.append("content",n.state.content),k.a.defaults.headers.common={Authorization:"".concat(t)},k.a.post("/user/image",a,{headers:{"content-type":"multipart/form-data"}}).then((function(){window.location.reload()})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({uiLoading:!1,imageError:"Error in posting the data"})}))},n.updateFormValues=function(e){e.preventDefault(),n.setState({buttonLoading:!0}),V(n.props.history);var t=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(t)};var a={firstName:n.state.firstName,lastName:n.state.lastName,country:n.state.country};k.a.post("/user",a).then((function(){n.setState({buttonLoading:!1})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({buttonLoading:!1})}))},n.state={firstName:"",lastName:"",email:"",phoneNumber:"",username:"",country:"",profilePicture:"",uiLoading:!0,buttonLoading:!1,imageError:""},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=Object(L.a)(e,H);return!0===this.state.uiLoading?r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.toolbar}),this.state.uiLoading&&r.a.createElement(S.a,{size:150,className:t.uiProgess})):r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(z.a,Object.assign({},a,{className:Object(U.a)(t.root,t)}),r.a.createElement(F.a,null,r.a.createElement("div",{className:t.details},r.a.createElement("div",null,r.a.createElement(C.a,{className:t.locationText,gutterBottom:!0,variant:"h4"},this.state.firstName," ",this.state.lastName),r.a.createElement(g.a,{variant:"outlined",color:"primary",type:"submit",size:"small",startIcon:r.a.createElement(B.a,null),className:t.uploadButton,onClick:this.profilePictureHandler},"Upload Photo"),r.a.createElement("input",{type:"file",onChange:this.handleImageChange}),!!this.state.imageError&&r.a.createElement("div",{className:t.customError}," ","Wrong Image Format || Supported Format are PNG and JPG"))),r.a.createElement("div",{className:t.progress})),r.a.createElement(D.a,null)),r.a.createElement("br",null),r.a.createElement(z.a,Object.assign({},a,{className:Object(U.a)(t.root,t)}),r.a.createElement("form",{autoComplete:"off",noValidate:!0},r.a.createElement(D.a,null),r.a.createElement(F.a,null,r.a.createElement(b.a,{container:!0,spacing:3},r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"First name",margin:"dense",name:"firstName",variant:"outlined",value:this.state.firstName,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"Last name",margin:"dense",name:"lastName",variant:"outlined",value:this.state.lastName,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"Email",margin:"dense",name:"email",variant:"outlined",disabled:!0,value:this.state.email,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"Phone Number",margin:"dense",name:"phone",type:"number",variant:"outlined",disabled:!0,value:this.state.phoneNumber,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"User Name",margin:"dense",name:"userHandle",disabled:!0,variant:"outlined",value:this.state.username,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,md:6,xs:12},r.a.createElement(f.a,{fullWidth:!0,label:"Country",margin:"dense",name:"country",variant:"outlined",value:this.state.country,onChange:this.handleChange})))),r.a.createElement(D.a,null),r.a.createElement(q.a,null))),r.a.createElement(g.a,{color:"primary",variant:"contained",type:"submit",className:t.submitButton,onClick:this.updateFormValues,disabled:this.state.buttonLoading||!this.state.firstName||!this.state.lastName||!this.state.country},"Save details",this.state.buttonLoading&&r.a.createElement(S.a,{size:30,className:t.progess})))}}]),a}(n.Component),M=O()((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,root:{},details:{display:"flex"},avatar:{height:110,width:100,flexShrink:0,flexGrow:0},locationText:{paddingLeft:"15px"},buttonProperty:{position:"absolute",top:"50%"},uiProgess:{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"},progess:{position:"absolute"},uploadButton:{marginLeft:"8px",margin:e.spacing(1)},customError:{color:"red",fontSize:"0.8rem",marginTop:10},submitButton:{marginTop:"10px"}}}))(R),G=a(38),J=a(73),K=a(44),Q=a(299),X=a(303),Y=a(306),Z=a(291),$=a(302),_=a(298),ee=a(101),te=a(300),ae=a(301),ne=a(295),re=a(113),oe=a.n(re),le=a(296),ie=a(297),se=a(293),ce=a(82),me=a.n(ce),ue=a(252),de=a(292),he=a(294),pe=a(10),ge=a(17),ye=a(97),fe=a.n(ye),Ee=a(98),be=a.n(Ee),Ne=["children","classes","onClose"];var ve=function(e){var t;return t={content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,title:{marginLeft:e.spacing(2),flex:1},submitButton:{display:"block",color:"white",textAlign:"center",position:"absolute",top:14,right:10},floatingButton:{position:"fixed",bottom:0,right:0},form:{width:"98%",marginLeft:13,marginTop:e.spacing(10)}},Object(c.a)(t,"toolbar",e.mixins.toolbar),Object(c.a)(t,"root",{minWidth:470}),Object(c.a)(t,"bullet",{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}),Object(c.a)(t,"pos",{marginBottom:12}),Object(c.a)(t,"uiProgess",{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"}),Object(c.a)(t,"dialogeStyle",{maxWidth:"50%"}),Object(c.a)(t,"viewRoot",{margin:0,padding:e.spacing(2)}),Object(c.a)(t,"closeButton",{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}),t},Ce=r.a.forwardRef((function(e,t){return r.a.createElement(ue.a,Object.assign({direction:"up",ref:t},e))})),we=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleOwnerSelectChange=function(e){n.setState({selectedOwner:e.target.value,name:e.target.name})},n.handleCategorySelectChange=function(e){n.setState({selectedCategory:e.target.value,name:e.target.name})},n.componentWillMount=function(){V(n.props.history);var e=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(e)},k.a.get("/payments").then((function(e){n.setState({payments:e.data,uiLoading:!1})})).catch((function(e){console.log(e)})),k.a.get("/owners").then((function(e){n.setState({owners:e.data,uiLoading:!1})})).catch((function(e){console.log(e)})),k.a.get("/collections").then((function(e){n.setState({categories:e.data,uiLoading:!1})})).catch((function(e){console.log(e)}))},n.state={todos:[],payments:[],paymentBy:"",description:"",category:"",amount:"",categories:[],owners:[],title:"",body:"",todoId:"",errors:[],open:!1,uiLoading:!0,selectedOwner:0,selectedCategory:0,buttonType:"",viewOpen:!1},n.deleteTodoHandler=n.deleteTodoHandler.bind(Object(K.a)(n)),n.handleEditClickOpen=n.handleEditClickOpen.bind(Object(K.a)(n)),n.handleViewOpen=n.handleViewOpen.bind(Object(K.a)(n)),n}return Object(u.a)(a,[{key:"deleteTodoHandler",value:function(e){var t=this;if(window.confirm("Are you sure you want to delete this item ?")){V(this.props.history);var a=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(a)};var n=e.payment.paymentId;k.a.delete("payment/".concat(n)).then((function(){k.a.get("/payments").then((function(e){t.setState({payments:e.data,uiLoading:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}},{key:"handleEditClickOpen",value:function(e){this.setState({title:e.todo.title,body:e.todo.body,todoId:e.todo.todoId,buttonType:"Edit",open:!0})}},{key:"handleViewOpen",value:function(e){this.setState({title:e.todo.title,body:e.todo.body,viewOpen:!0})}},{key:"renderCategoryOptions",value:function(){return[{collectionId:0,collectionName:"Select a Category"}].concat(Object(J.a)(this.state.categories)).map((function(e,t){return r.a.createElement(Z.a,{label:"Select a category",value:e.collectionId,key:t,name:e.collectionName},e.collectionName)}))}},{key:"renderOwnerOptions",value:function(){return[{ownerId:0,ownerName:"Select Owner"}].concat(Object(J.a)(this.state.owners)).map((function(e,t){return r.a.createElement(Z.a,{label:"Select owner",value:e.ownerId,key:t,name:e.ownerName},e.ownerName)}))}},{key:"render",value:function(){var e=this,t=O()(ve)((function(e){var t=e.children,a=e.classes,n=e.onClose,o=Object(L.a)(e,Ne);return r.a.createElement(de.a,Object.assign({disableTypography:!0,className:a.root},o),r.a.createElement(C.a,{variant:"h6"},t),n?r.a.createElement(se.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(me.a,null)):null)})),a=O()((function(e){return{viewRoot:{padding:e.spacing(2)}}}))(he.a);fe.a.extend(be.a);var n=this.props.classes,o=this.state,l=o.open,i=o.errors,s=o.viewOpen,c=function(){e.setState({viewOpen:!1})},m=function(t){e.setState({open:!1})};if(!0===this.state.uiLoading)return r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),this.state.uiLoading&&r.a.createElement(S.a,{size:150,className:n.uiProgess}));var u=[],d=[];this.state.owners.length>0&&this.state.categories.length>0&&this.state.payments.length>0&&(this.state.payments.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{CategoryName:e.state.categories.find((function(e){return e.collectionId==t.Category})).collectionName})})).reduce((function(e,t){return e[t.CategoryName]||(e[t.CategoryName]={argument:t.CategoryName,value:t.Amount},u.push(e[t.CategoryName])),e[t.CategoryName].Amount=Number(t.Amount)+(e[t.CategoryName].Amount?Number(e[t.CategoryName].Amount):0),e[t.CategoryName].value=e[t.CategoryName].Amount,e}),{}),this.state.payments.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{OwnerName:e.state.owners.find((function(e){return e.ownerId==t.TransactionBy})).ownerName})})).reduce((function(e,t){return e[t.OwnerName]||(e[t.OwnerName]={argument:t.OwnerName,value:t.Amount},d.push(e[t.OwnerName])),e[t.OwnerName].Amount=Number(t.Amount)+(e[t.OwnerName].Amount?Number(e[t.OwnerName].Amount):0),e[t.OwnerName].value=e[t.OwnerName].Amount,e}),{}));return r.a.createElement("main",{style:{width:1200,padding:24}},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(se.a,{className:n.floatingButton,color:"primary","aria-label":"Add Todo",onClick:function(){e.setState({todoId:"",title:"",body:"",buttonType:"",open:!0})}},r.a.createElement(oe.a,{style:{fontSize:60}})),r.a.createElement(ne.a,{fullScreen:!0,open:l,onClose:m,TransitionComponent:Ce},r.a.createElement(le.a,{color:"secondary",className:n.appBar},r.a.createElement(ie.a,null,r.a.createElement(se.a,{edge:"start",color:"inherit",onClick:m,"aria-label":"close"},r.a.createElement(me.a,null)),r.a.createElement(C.a,{variant:"h6",className:n.title},"Edit"===this.state.buttonType?"Edit Todo":"Create a new Payment"),r.a.createElement(g.a,{autoFocus:!0,color:"inherit",onClick:function(t){V(e.props.history),t.preventDefault();e.state.title,e.state.body;var a={TransactionBy:e.state.selectedOwner,Category:e.state.selectedCategory,Description:e.state.description,Amount:e.state.amount},n={};n="Edit"===e.state.buttonType?{url:"/payment/".concat(e.state.todoId),method:"put",data:a}:{url:"/payment",method:"post",data:a};var r=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(r)},k()(n).then((function(){e.setState({open:!1}),V(e.props.history);var t=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(t)},k.a.get("/payments").then((function(t){e.setState({payments:t.data,uiLoading:!1})})).catch((function(e){console.log(e)}))})).catch((function(t){e.setState({open:!0,errors:t.response.data}),console.log(t)}))},className:n.submitButton},"Edit"===this.state.buttonType?"Save":"Submit"))),r.a.createElement("form",{className:n.form,noValidate:!0},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(Y.a,{variant:"outlined",required:!0,fullWidth:!0,id:"paymentBy",label:"paymentBy",name:"paymentBy",autoComplete:"paymentBy",helperText:i.paymentBy,value:this.state.selectedOwner,onChange:this.handleOwnerSelectChange},this.renderOwnerOptions())),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"description",label:"Description",name:"description",autoComplete:"description",helperText:i.description,value:this.state.description,error:!!i.description,onChange:this.handleChange})),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(Y.a,{variant:"outlined",required:!0,fullWidth:!0,id:"category",label:"Category",name:"category",autoComplete:"category",helperText:i.category,value:this.state.selectedCategory,onChange:this.handleCategorySelectChange},this.renderCategoryOptions())),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"amount",label:"Amount",name:"amount",autoComplete:"amount",helperText:i.amount,value:this.state.amount,error:!!i.amount,onChange:this.handleChange}))))),r.a.createElement(_.a,{component:ee.a,style:{marginBottom:20}},r.a.createElement(Q.a,{sx:{minWidth:650},"aria-label":"a dense table"},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement($.a,{align:"right"},"Payment Date"),r.a.createElement($.a,{align:"right"},"Payment By"),r.a.createElement($.a,{align:"right"},"Description"),r.a.createElement($.a,{align:"right"},"Category"),r.a.createElement($.a,{align:"right"},"Amount"),r.a.createElement($.a,{align:"right"},"Action"))),r.a.createElement(X.a,null,this.state.payments.map((function(t){return r.a.createElement(ae.a,null,r.a.createElement($.a,{align:"right"},new Date(t.TransactionDate).toLocaleDateString("en-US")),r.a.createElement($.a,{align:"right"},e.state.owners.length>0?e.state.owners.find((function(e){return e.ownerId==t.TransactionBy})).ownerName:""),r.a.createElement($.a,{align:"right"},t.Description),r.a.createElement($.a,{align:"right"},e.state.categories.length>0?e.state.categories.find((function(e){return e.collectionId==t.Category})).collectionName:""),r.a.createElement($.a,{align:"right"},t.Amount),r.a.createElement($.a,{align:"right"},r.a.createElement(g.a,{size:"small",color:"primary",onClick:function(){return e.deleteTodoHandler({payment:t})}},"Delete")))}))))),r.a.createElement(ne.a,{onClose:c,"aria-labelledby":"customized-dialog-title",open:s,fullWidth:!0,classes:{paperFullWidth:n.dialogeStyle}},r.a.createElement(t,{id:"customized-dialog-title",onClose:c},this.state.title),r.a.createElement(a,{dividers:!0},r.a.createElement(f.a,{fullWidth:!0,id:"todoDetails",name:"body",multiline:!0,readonly:!0,rows:1,rowsMax:25,value:this.state.body,InputProps:{disableUnderline:!0}}))))}}]),a}(n.Component),Oe=O()(ve)(we),xe=["children","classes","onClose"];var Se=function(e){var t;return t={content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar,title:{marginLeft:e.spacing(2),flex:1},submitButton:{display:"block",color:"white",textAlign:"center",position:"absolute",top:14,right:10},floatingButton:{position:"fixed",bottom:0,right:0},form:{width:"98%",marginLeft:13,marginTop:e.spacing(10)}},Object(c.a)(t,"toolbar",e.mixins.toolbar),Object(c.a)(t,"root",{minWidth:470}),Object(c.a)(t,"bullet",{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"}),Object(c.a)(t,"pos",{marginBottom:12}),Object(c.a)(t,"uiProgess",{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"}),Object(c.a)(t,"dialogeStyle",{maxWidth:"50%"}),Object(c.a)(t,"viewRoot",{margin:0,padding:e.spacing(2)}),Object(c.a)(t,"closeButton",{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}),t},je=(r.a.forwardRef((function(e,t){return r.a.createElement(ue.a,Object.assign({direction:"up",ref:t},e))})),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.handleOwnerSelectChange=function(e){n.setState({selectedOwner:e.target.value,name:e.target.name})},n.handleCategorySelectChange=function(e){n.setState({selectedCategory:e.target.value,name:e.target.name})},n.componentWillMount=function(){V(n.props.history);var e=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(e)},k.a.get("/payments").then((function(e){n.setState({payments:e.data,uiLoading:!1})})).catch((function(e){console.log(e)})),k.a.get("/owners").then((function(e){n.setState({owners:e.data,uiLoading:!1})})).catch((function(e){console.log(e)})),k.a.get("/collections").then((function(e){n.setState({categories:e.data,uiLoading:!1})})).catch((function(e){console.log(e)}))},n.state={todos:[],payments:[],paymentBy:"",description:"",category:"",amount:"",categories:[],owners:[],title:"",body:"",todoId:"",errors:[],open:!1,uiLoading:!0,selectedOwner:0,selectedCategory:0,buttonType:"",viewOpen:!1},n.deleteTodoHandler=n.deleteTodoHandler.bind(Object(K.a)(n)),n.handleEditClickOpen=n.handleEditClickOpen.bind(Object(K.a)(n)),n.handleViewOpen=n.handleViewOpen.bind(Object(K.a)(n)),n}return Object(u.a)(a,[{key:"deleteTodoHandler",value:function(e){var t=this;V(this.props.history);var a=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(a)};var n=e.payment.paymentId;k.a.delete("payment/".concat(n)).then((function(){k.a.get("/payments").then((function(e){t.setState({payments:e.data,uiLoading:!1})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"handleEditClickOpen",value:function(e){this.setState({title:e.todo.title,body:e.todo.body,todoId:e.todo.todoId,buttonType:"Edit",open:!0})}},{key:"handleViewOpen",value:function(e){this.setState({title:e.todo.title,body:e.todo.body,viewOpen:!0})}},{key:"renderCategoryOptions",value:function(){return[{collectionId:0,collectionName:"Select a Category"}].concat(Object(J.a)(this.state.categories)).map((function(e,t){return r.a.createElement(Z.a,{label:"Select a category",value:e.collectionId,key:t,name:e.collectionName},e.collectionName)}))}},{key:"renderOwnerOptions",value:function(){return[{ownerId:0,ownerName:"Select Owner"}].concat(Object(J.a)(this.state.owners)).map((function(e,t){return r.a.createElement(Z.a,{label:"Select owner",value:e.ownerId,key:t,name:e.ownerName},e.ownerName)}))}},{key:"render",value:function(){var e=this,t=O()(Se)((function(e){var t=e.children,a=e.classes,n=e.onClose,o=Object(L.a)(e,xe);return r.a.createElement(de.a,Object.assign({disableTypography:!0,className:a.root},o),r.a.createElement(C.a,{variant:"h6"},t),n?r.a.createElement(se.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(me.a,null)):null)})),a=O()((function(e){return{viewRoot:{padding:e.spacing(2)}}}))(he.a);fe.a.extend(be.a);var n=this.props.classes,o=this.state,l=(o.open,o.errors,o.viewOpen),i=function(){e.setState({viewOpen:!1})};if(!0===this.state.uiLoading)return r.a.createElement("main",{className:n.content},r.a.createElement("div",{className:n.toolbar}),this.state.uiLoading&&r.a.createElement(S.a,{size:150,className:n.uiProgess}));var s=[],c=[],m=[{category:"Rent",payment:0,expected:1200},{category:"Charity",payment:0,expected:1200},{category:"Electricity",payment:0,expected:100},{category:"Internet",payment:0,expected:40},{category:"Insurance",payment:0,expected:75},{category:"Expenses",payment:0,expected:285},{category:"Fuel",payment:0,expected:100}];this.state.owners.length>0&&this.state.categories.length>0&&this.state.payments.length>0&&(this.state.payments.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{CategoryName:e.state.categories.find((function(e){return e.collectionId==t.Category})).collectionName})})).reduce((function(e,t){return e[t.CategoryName]||(e[t.CategoryName]={argument:t.CategoryName,value:t.Amount},s.push(e[t.CategoryName])),e[t.CategoryName].Amount=Number(t.Amount)+(e[t.CategoryName].Amount?Number(e[t.CategoryName].Amount):0),e[t.CategoryName].value=e[t.CategoryName].Amount,e}),{}),this.state.payments.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{CategoryName:e.state.categories.find((function(e){return e.collectionId==t.Category})).collectionName})})).reduce((function(e,t){return e[t.CategoryName]||(e[t.CategoryName]={category:t.CategoryName,payment:t.Amount,expected:"Rent"==t.CategoryName||"Charity"==t.CategoryName?1200:"Food"==t.CategoryName?500:"Electricity"==t.CategoryName?100:"Internet"==t.CategoryName?40:"Insurance"==t.CategoryName?75:"Expenses"==t.CategoryName?285:"Fuel"==t.CategoryName?100:0},m.push(e[t.CategoryName])),e[t.CategoryName].Amount=Number(t.Amount)+(e[t.CategoryName].Amount?Number(e[t.CategoryName].Amount):0),e[t.CategoryName].payment=e[t.CategoryName].Amount,e}),{}),this.state.payments.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{OwnerName:e.state.owners.find((function(e){return e.ownerId==t.TransactionBy})).ownerName})})).reduce((function(e,t){return e[t.OwnerName]||(e[t.OwnerName]={argument:t.OwnerName,value:t.Amount},c.push(e[t.OwnerName])),e[t.OwnerName].Amount=Number(t.Amount)+(e[t.OwnerName].Amount?Number(e[t.OwnerName].Amount):0),e[t.OwnerName].value=e[t.OwnerName].Amount,e}),{}));return r.a.createElement("main",{style:{width:1200,padding:24}},r.a.createElement("div",{className:n.toolbar}),r.a.createElement(_.a,{component:ee.a,style:{marginBottom:20}},r.a.createElement(Q.a,{sx:{minWidth:650},"aria-label":"a dense table"},r.a.createElement(X.a,null,r.a.createElement(ae.a,null,r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(ge.c,{data:m},r.a.createElement(ge.a,null),r.a.createElement(ge.h,{max:2400}),r.a.createElement(ge.b,{name:"Payment",valueField:"payment",argumentField:"category"}),r.a.createElement(ge.b,{name:"Expected",valueField:"expected",argumentField:"category"}),r.a.createElement(pe.a,null),r.a.createElement(ge.d,null),r.a.createElement(pe.f,null),r.a.createElement(ge.g,null),r.a.createElement(pe.g,null),r.a.createElement(ge.f,{text:"Payments Vs Expected payments in Oct 2021"}),r.a.createElement(pe.l,null)))))))),r.a.createElement(_.a,{component:ee.a,style:{marginBottom:20}},r.a.createElement(Q.a,{sx:{minWidth:650},"aria-label":"a dense table"},r.a.createElement(X.a,null,r.a.createElement(ae.a,null,r.a.createElement($.a,null,r.a.createElement(ge.c,{data:s,height:400,width:400,options:{legend:{visible:!0,position:"right"}}},r.a.createElement(ge.e,{valueField:"value",argumentField:"argument"}),r.a.createElement(ge.f,{text:"Payments per category"}),r.a.createElement(pe.a,null),r.a.createElement(ge.d,null),r.a.createElement(pe.f,null),r.a.createElement(ge.g,null),r.a.createElement(pe.g,null))),r.a.createElement($.a,null,r.a.createElement(ge.c,{data:c,height:400,width:400,options:{legend:{visible:!0,position:"right"}}},r.a.createElement(ge.e,{valueField:"value",argumentField:"argument"}),r.a.createElement(ge.f,{text:"Payments per Action Taker"}),r.a.createElement(pe.a,null),r.a.createElement(ge.d,null),r.a.createElement(pe.f,null),r.a.createElement(ge.g,null),r.a.createElement(pe.g,null))))))),r.a.createElement(ne.a,{onClose:i,"aria-labelledby":"customized-dialog-title",open:l,fullWidth:!0,classes:{paperFullWidth:n.dialogeStyle}},r.a.createElement(t,{id:"customized-dialog-title",onClose:i},this.state.title),r.a.createElement(a,{dividers:!0},r.a.createElement(f.a,{fullWidth:!0,id:"todoDetails",name:"body",multiline:!0,readonly:!0,rows:1,rowsMax:25,value:this.state.body,InputProps:{disableUnderline:!0}}))))}}]),a}(n.Component)),ke=O()(Se)(je),Ae=a(304),Te=a(281),Ie=a(251),Pe=a(305),Le=a(290),We=a(158),Be=a.n(We),ze=a(157),Fe=a.n(ze),De=a(156),qe=a.n(De),Ue=a(159),Ve=a.n(Ue),He=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={render:0},n.loadAccountPage=function(e){n.setState({render:1})},n.loadTodoPage=function(e){n.setState({render:0})},n.loadDashboardPage=function(e){n.setState({render:2})},n.logoutHandler=function(e){localStorage.removeItem("AuthToken"),n.props.history.push("/login")},n.componentWillMount=function(){V(n.props.history);var e=localStorage.getItem("AuthToken");k.a.defaults.headers.common={Authorization:"".concat(e)},k.a.get("/user").then((function(e){console.log(e.data),n.setState({firstName:e.data.userCredentials.firstName,lastName:e.data.userCredentials.lastName,email:e.data.userCredentials.email,phoneNumber:e.data.userCredentials.phoneNumber,country:e.data.userCredentials.country,username:e.data.userCredentials.username,uiLoading:!1,profilePicture:e.data.userCredentials.imageUrl})})).catch((function(e){403===e.response.status&&n.props.history.push("/login"),console.log(e),n.setState({errorMsg:"Error in retrieving the data"})}))},n.state={firstName:"",lastName:"",profilePicture:"",uiLoading:!0,imageLoading:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.classes;return!0===this.state.uiLoading?r.a.createElement("div",{className:e.root},this.state.uiLoading&&r.a.createElement(S.a,{size:150,className:e.uiProgess})):r.a.createElement("div",{className:e.root},r.a.createElement(y.a,null),r.a.createElement(le.a,{color:"secondary",position:"fixed",className:e.appBar},r.a.createElement(ie.a,null,r.a.createElement(C.a,{variant:"h6",noWrap:!0},"Payments"))),r.a.createElement(Ae.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(D.a,null),r.a.createElement("center",null,r.a.createElement(p.a,{src:this.state.profilePicture,className:e.avatar}),r.a.createElement("p",null," ",this.state.firstName," ",this.state.lastName)),r.a.createElement(D.a,null),r.a.createElement(Te.a,null,r.a.createElement(Ie.a,{button:!0,key:"Dashboard",onClick:this.loadDashboardPage},r.a.createElement(Pe.a,null," ",r.a.createElement(qe.a,null)," "),r.a.createElement(Le.a,{primary:"Dashboard"})),r.a.createElement(Ie.a,{button:!0,key:"Todo",onClick:this.loadTodoPage},r.a.createElement(Pe.a,null," ",r.a.createElement(Fe.a,null)," "),r.a.createElement(Le.a,{primary:"Payments"})),r.a.createElement(Ie.a,{button:!0,key:"Account",onClick:this.loadAccountPage},r.a.createElement(Pe.a,null," ",r.a.createElement(Be.a,null)," "),r.a.createElement(Le.a,{primary:"Account"})),r.a.createElement(Ie.a,{button:!0,key:"Logout",onClick:this.logoutHandler},r.a.createElement(Pe.a,null," ",r.a.createElement(Ve.a,null)," "),r.a.createElement(Le.a,{primary:"Logout"})))),r.a.createElement("div",null,1==this.state.render?r.a.createElement(M,null):0==this.state.render?r.a.createElement(Oe,null):r.a.createElement(ke,null)))}}]),a}(n.Component),Re=O()((function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},avatar:{height:110,width:100,flexShrink:0,flexGrow:0,marginTop:20},uiProgess:{position:"fixed",zIndex:"1000",height:"31px",width:"31px",left:"50%",top:"35%"},toolbar:e.mixins.toolbar}}))(He);var Me=function(){return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/login",component:T}),r.a.createElement(s.a,{exact:!0,path:"/signup",component:P}),r.a.createElement(s.a,{exact:!0,path:"/",component:Re}))))},Ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,310)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)}))};a(245);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root")),Ge()}},[[195,1,2]]]);
//# sourceMappingURL=main.0275c3b4.chunk.js.map